
% This LaTeX was auto-generated from MATLAB code with dynamically generated stylesheet that is based on
% one created by Ned Gulley and Matthew Simoneau, September 2003 Copyright 1984-2013 The MathWorks, Inc.
%   location of original file  ...\toolbox\matlab\codetools\private\mxdom2latex.xsl
% Adapted by Han Oostdijk, August 2015
%
% use \lstinputlisting{xx.m} for inclusion of source file xx.m
%

\documentclass{article}
\usepackage[a4paper,margin=1in,portrait]{geometry}
\usepackage[]{matlab-prettifier}
% package matlab-prettifier created by Julien Cretel. Available CTAN (only matlab-prettifier.sty is needed)
\usepackage{graphicx}
\usepackage{epstopdf}
\usepackage{color}
\usepackage{lmodern}
\usepackage{verbatim}
\lstset{style = Matlab-editor}
\usepackage[unicode=true,pdftitle={},
pdfauthor={},
pdfsubject={},
pdfkeywords={},
pdfproducer={},
pdfcreator={},
    bookmarks=false,bookmarksnumbered=true,bookmarksopen=true,bookmarksopenlevel=2,
    breaklinks=false,pdfborder={0 0 1},backref=false,colorlinks=true,hidelinks]
    {hyperref} 

\sloppy
\definecolor{lightgray}{gray}{0.5}
\setlength{\parindent}{0pt}
\setcounter{secnumdepth}{-2} 

\begin{document}
\title{}
\author{}
%\maketitle
%\tableofcontents
%\lstlistoflistings
%\listoffigures

\def\captionA{} 
\def\captionB{} 
\def\captionC{} 
\def\captionD{} 
\def\captionE{} 
\def\captionF{} 
\def\captionG{} 
\def\captionH{} 
\def\captionI{} 
\def\captionJ{} 
\def\captionK{} 
\def\captionL{} 
\def\captionM{} 
\def\captionN{} 
\def\captionO{} 
\def\captionP{} 

    
    
\section*{exampleA.m : file for publish\_mpl showing extra options}

\begin{par}
This file will be used to demonstrate the possibilies of the new function \texttt{publish\_mpl} . The new function expands the possibilities of the standard \texttt{publish} function with regard to the LaTeX format. Motivation for creating this new function is that I want more control over the output than the pdf and html format can offer. So LaTeX is the obvious choice but at the same time I want to avoid manual editing of the tex file handle as much as possible. By using an adapted xsl file, the package matlab-prettifier created by Julien Cretel and using additional \texttt{publish} options we can achieve the following:
\end{par} \vspace{1em}
\begin{enumerate}
\setlength{\itemsep}{-1ex}
   \item determine the documentclass and layout of the document
   \item show MATLAB code (and also listings of mfiles) in a nice layout
   \item specify hyperref options that determine the pdf attributes
   \item determine how the header of the document is presented (titel, author, list of figures and listings)
   \item include captions and references
\end{enumerate}

\subsection*{Contents}

\begin{itemize}
\setlength{\itemsep}{-1ex}
   \item Acknowledgement
   \item Square Waves from Sine Waves
   \item Add an Odd Harmonic and Plot It
   \item Note About Gibbs Phenomenon
   \item Listing of this script
   \item Listing of publish\_mpl\_examples.m
\end{itemize}


\subsection*{Acknowledgement}

\begin{par}
This file is adapted from the \texttt{fourier\_demo2.m} file that is included in MATLAB and can be copied in the current directory with
\end{par} \vspace{1em}

\begin{verbatim}copyfile(fullfile(matlabroot,'help','techdoc',...
'matlab_env','examples','fourier_demo2.m'),'.','f')\end{verbatim}
    

\subsection*{Square Waves from Sine Waves}

\begin{par}

% The actual function to publish starts now.
% This text block is changed to a latex block to show the caption and reference capabilities
%
% the following statements insert the references to the plots:
The Fourier series expansion for a square-wave is
made up of a sum of odd harmonics, as shown here
by the plots in figure \ref{exampleA_01.eps} on page \pageref{exampleA_01.eps} (1 harmonic),
figure \ref{exampleA_02.eps} on page \pageref{exampleA_02.eps} (5 harmonics) and
figure \ref{exampleA_03.eps} on page \pageref{exampleA_03.eps} (9 harmonics).
%
% the following statements define the captions of the plots:
\global\def\captionA{first harmonic}
\global\def\captionB{sum of first 5 harmonics}
\global\def\captionC{sum of first 9 harmonics}

\end{par} \vspace{1em}
 
\begin{lstlisting}
if exist('avalue','var')
    fprintf('print the value passed to this script: %f\n',avalue)
else
    fprintf('no value passed to this script\n')
end
\end{lstlisting}

        \color{lightgray} 
		\begin{verbatim}print the value passed to this script: 2.000000
\end{verbatim} 
		\color{black}
    

\subsection*{Add an Odd Harmonic and Plot It}

 
\begin{lstlisting}
t   = 0:.1:pi*4;
k   = 1 ;
y   = sin(k*t)/k;
figure(k)
plot(t,y);
title(sprintf('MATLAB caption: plot when k=%.0f',k))
\end{lstlisting}

\begin{figure}[ht]
\centering 
\includegraphics [width=4in]{exampleA_01.eps}
\caption{\captionA} 
\label{exampleA_01.eps} 
\end{figure}
\begin{par}
In each iteration of the for loop add an odd harmonic to y. As \textit{k} increases, the output approximates a square wave with increasing accuracy.
\end{par} \vspace{1em}
\begin{par}
Perform the following mathematical operation at each iteration:
\end{par} \vspace{1em}
\begin{par}
$$ y = y + \frac{\sin kt}{k} $$
\end{par} \vspace{1em}
\begin{par}
Display some of the plots:
\end{par} \vspace{1em}
 
\begin{lstlisting}
for k = 3:2:9
    y = y + sin(k*t)/k;
    if mod(k,4)==1
        figure(k)
        plot(t,y)
        title(sprintf('MATLAB caption: plot when k=%.0f',k))
    end
end
\end{lstlisting}

\begin{figure}[ht]
\centering 
\includegraphics [width=4in]{exampleA_02.eps}
\caption{\captionB} 
\label{exampleA_02.eps} 
\end{figure}

\begin{figure}[ht]
\centering 
\includegraphics [width=4in]{exampleA_03.eps}
\caption{\captionC} 
\label{exampleA_03.eps} 
\end{figure}


\subsection*{Note About Gibbs Phenomenon}

\begin{par}
Even though the approximations are constantly improving, they will never be exact because of the Gibbs phenomenon, or ringing.
\end{par} \vspace{1em}


\subsection*{Listing of this script}

\begin{par}

% assuming m-file in directory one level higher than tex dir (using the standard html subdirectory)
% assuming numbers and framed are not set in \usepackage and they are wanted
% \lstinputlisting[frame=single,numbers=left]{../exampleA.m}
% assuming numbers and framed are set in \usepackage and they are not wanted
% \lstinputlisting[frame=none,numbers=none]{../exampleA.m}
% assuming numbers and framed are set in \usepackage are set and wanted
\lstinputlisting{../exampleA.m}

\end{par} \vspace{1em}


\subsection*{Listing of publish\_mpl\_examples.m}

\begin{par}

\lstinputlisting{../publish_mpl_examples.m}

\end{par} \vspace{1em}



\end{document}
    
